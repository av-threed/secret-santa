<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Secret Santa Gift Ideas</title>
  <link rel="stylesheet" href="style.css">
  <script src="supabase.js" type="module"></script>
  <script src="sidebar.js" type="module"></script>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Gift Lists</h2>
      <button id="sidebarPin" class="sidebar-pin" title="Pin Sidebar">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z" />
        </svg>
      </button>
    </div>
    
    <div class="sidebar-content">
      <button id="myGiftList" class="sidebar-button">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M20,11H4V8H20M20,15H13V13H20M20,19H13V17H20M11,19H4V13H11M20.33,4.67L18.67,3L17,4.67L15.33,3L13.67,4.67L12,3L10.33,4.67L8.67,3L7,4.67L5.33,3L3.67,4.67L2,3V19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19V3L20.33,4.67Z" />
        </svg>
        My Gift List <span id="badgeMyGifts" class="badge"></span>
      </button>
      
      <button id="kidsGiftList" class="sidebar-button">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z" />
        </svg>
        Kids Gift Lists <span id="badgeKids" class="badge"></span>
      </button>

      <button id="recipientGifts" class="sidebar-button">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M12 2C8.13 2 5 5.13 5 9c0 3.25 2.44 5.94 5.58 6.43L12 22l1.42-6.57C16.56 14.94 19 12.25 19 9c0-3.87-3.13-7-7-7m0 10.5A3.5 3.5 0 1 1 12 5a3.5 3.5 0 0 1 0 7.5Z"/>
        </svg>
        Recipient Gifts
      </button>

      <button id="setRecipient" class="sidebar-button">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M20 6h-3.2c.1-.3.2-.6.2-1a3 3 0 0 0-6 0c0 .4.1.7.2 1H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2m-7-2a1 1 0 0 1 1 1c0 .6-.4 1-1 1s-1-.4-1-1a1 1 0 0 1 1-1m7 14H8V8h12Z"/>
        </svg>
        Set My Recipient
      </button>
    </div>
    
    <button onclick="signOut()" class="sidebar-signout">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z" />
      </svg>
      Sign Out
    </button>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div id="welcomeBanner" class="welcome-banner">
      <span id="welcomeMessage"></span>
    </div>

    <!-- My Gift List Modal -->
    <div id="myGiftListModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>My Gift List</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <form id="addGiftForm" class="gift-form">
            <input type="text" id="giftName" placeholder="Gift name" required>
            <input type="text" id="giftPrice" placeholder="Price (optional)">
            <input type="text" id="giftLink" placeholder="Link to gift (optional)">
            <textarea id="giftNotes" placeholder="Notes (optional)"></textarea>
            <button type="submit" class="btn-primary">Add Gift</button>
          </form>
          <div id="myGiftsList" class="gifts-list"></div>
        </div>
      </div>
    </div>

    <!-- Kids Gift List Modal -->
    <div id="kidsGiftListModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Kids Gift Lists</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="kids-selector">
            <select id="kidSelector" class="kid-select">
              <option value="">Select a child...</option>
            </select>
          </div>
          <div id="selectedKidGifts" class="gifts-list"></div>
        </div>
      </div>
    </div>

    <!-- Recipient Gifts Modal -->
    <div id="recipientGiftsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Recipient Gift Ideas</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div id="recipientHeader" class="helper-text"></div>
          <div id="recipientGiftsList" class="gifts-list"></div>
        </div>
      </div>
    </div>

    <!-- Set My Recipient Modal -->
    <div id="setRecipientModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Set My Recipient</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <p id="recipientStatus" class="helper-text"></p>
          <label for="recipientSelect">Choose the person you drew:</label>
          <select id="recipientSelect">
            <option value="">Select a person...</option>
          </select>
          <button id="saveRecipientBtn" class="btn-primary" style="margin-top: 10px;">Save Recipient</button>
        </div>
      </div>
    </div>

    <div class="main-forms-container">
    <!-- Adult Gift Form -->
    <form id="adultGiftForm" class="gift-form adult-form">
      <h3 class="form-title">Your Gift Ideas</h3>
      <p class="helper-text">Add gift ideas you would like to receive. Only you can submit ideas for yourself.</p>
      <label for="adultGiftIdeas">Gift Ideas for You:</label>
      <textarea id="adultGiftIdeas" name="giftIdeas" rows="4" required></textarea>
      <button type="submit" class="submit-btn">Add My Gift Ideas</button>
    </form>

    <!-- Kids Gift Form -->
    <form id="kidsGiftForm" class="gift-form kids-form">
      <h3 class="form-title">Suggest Gift Ideas for Kids</h3>
      <p class="helper-text">Help build a gift suggestion list for the little ones! Other family members can use these ideas for shopping.</p>
      
      <div class="form-group">
        <label for="childSelect">Which child are these ideas for?</label>
        <select id="childSelect" name="childName" required>
          <option value="">Select a child...</option>
        </select>
      </div>

      <div class="form-group">
        <label for="kidsGiftIdeas">Gift Ideas for Selected Child:</label>
        <textarea id="kidsGiftIdeas" name="giftIdeas" rows="4" placeholder="Enter gift suggestions for this child (one per line)...&#13;&#10;Examples:&#13;&#10;- Dinosaur toys&#13;&#10;- Size 4T winter clothes&#13;&#10;- Educational books&#13;&#10;- Favorite characters: Paw Patrol, PJ Masks" required></textarea>
      </div>

      <div class="tips-section">
        <h4 class="tips-title">Helpful details to include:</h4>
        <ul>
          <li>Sizes for clothes/shoes</li>
          <li>Favorite characters or themes</li>
          <li>Specific toys or brands they like</li>
          <li>Things they already have (to avoid duplicates)</li>
        </ul>
      </div>

      <button type="submit" class="submit-btn">Add Gift Suggestions</button>
    </form>
  </div>

  <!-- SVG Icons Container -->
  <div class="svg-container">
    <object type="image/svg+xml" data="sidebar-icons.svg"></object>
  </div>

  <!-- Environment Variables (Replace these with your Supabase project values) -->
  <script>
    window.env = {
      SUPABASE_URL: 'your-supabase-url',
      SUPABASE_KEY: 'your-supabase-key'
    };
  </script>

  <!-- Application Scripts -->
  <script type="module" src="auth.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
